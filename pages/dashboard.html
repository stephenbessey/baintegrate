<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Customer Dashboard - BA Integrate Business-Agent Integration Standard Platform">
  <meta name="keywords" content="customer dashboard, BAIS, business portal, analytics">
  <meta name="author" content="BA Integrate">
  
  <title>Dashboard - BA Integrate</title>
  
  <!-- Favicon  -->
  <link rel="icon" type="image/svg+xml" href="/assets/images/favicon.svg">
  
  <!-- CSS - Load in order of specificity -->
  <link rel="stylesheet" href="/assets/css/base/variables.css">
  <link rel="stylesheet" href="/assets/css/base/reset.css">
  <link rel="stylesheet" href="/assets/css/base/typography.css">
  <link rel="stylesheet" href="/assets/css/components/button.css">
  <link rel="stylesheet" href="/assets/css/components/card.css">
  <link rel="stylesheet" href="/assets/css/components/navigation.css">
  <link rel="stylesheet" href="/assets/css/components/footer.css">
  <link rel="stylesheet" href="/assets/css/layouts/grid.css">
  <link rel="stylesheet" href="/assets/css/layouts/section.css">
  <link rel="stylesheet" href="/assets/css/components/dashboard.css">
</head>
<body>
  <!-- Navigation -->
  <nav id="main-nav" class="navigation">
    <div class="nav-container">
      <div class="nav-logo">
        <a href="/">BA Integrate</a>
      </div>
      
      <button class="nav-toggle" aria-label="Toggle navigation">
        <span class="nav-toggle-line"></span>
        <span class="nav-toggle-line"></span>
        <span class="nav-toggle-line"></span>
      </button>
      
      <ul class="nav-links">
        <li><a href="/pages/platform.html" class="nav-link">Platform</a></li>
        <li><a href="/pages/solutions.html" class="nav-link">Solutions</a></li>
        <li><a href="/pages/contact.html" class="nav-link">Contact</a></li>
      </ul>
      
      <div class="nav-actions">
        <div class="user-menu">
          <span class="user-name" id="user-name">Customer</span>
          <button class="btn btn-secondary" id="logout-btn">Logout</button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main>
    <!-- Dashboard Header -->
    <section class="section section-hero">
      <div class="container">
        <div class="dashboard-header">
          <div>
            <h1 class="dashboard-title">Business Dashboard</h1>
            <p class="dashboard-subtitle">Monitor your BAIS integrations and agent performance</p>
          </div>
          <div class="dashboard-actions">
            <button class="btn btn-secondary" id="refresh-btn">Refresh Data</button>
            <button class="btn btn-primary" id="export-btn">Export Report</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Main Dashboard Grid -->
    <section class="section">
      <div class="container">
        <div class="dashboard-grid">
          
          <!-- E-commerce Analytics -->
          <div class="dashboard-section">
            <div class="section-header">
              <div class="section-icon">E</div>
              <div class="section-title-group">
                <h2 class="section-title">E-commerce Analytics</h2>
                <p class="section-subtitle">Track transactions, monitor inventory, and analyze sales performance</p>
              </div>
            </div>
            
            <div class="analytics-grid">
              <div class="metric-card">
                <div class="metric-icon">$</div>
                <div class="metric-content">
                  <h3 class="metric-value" id="total-revenue">$24,567</h3>
                  <p class="metric-label">Total Revenue</p>
                  <span class="metric-change positive">+12.5%</span>
                </div>
              </div>
              
              <div class="metric-card">
                <div class="metric-icon">O</div>
                <div class="metric-content">
                  <h3 class="metric-value" id="orders-processed">1,247</h3>
                  <p class="metric-label">Orders Processed</p>
                  <span class="metric-change positive">+8.3%</span>
                </div>
              </div>
              
              <div class="metric-card">
                <div class="metric-icon">%</div>
                <div class="metric-content">
                  <h3 class="metric-value" id="conversion-rate">3.2%</h3>
                  <p class="metric-label">Conversion Rate</p>
                  <span class="metric-change positive">+0.4%</span>
                </div>
              </div>
              
              <div class="metric-card">
                <div class="metric-icon">A</div>
                <div class="metric-content">
                  <h3 class="metric-value" id="avg-order-value">$89.45</h3>
                  <p class="metric-label">Avg Order Value</p>
                  <span class="metric-change positive">+5.2%</span>
                </div>
              </div>
            </div>
            
            <div class="chart-container">
              <h3 class="chart-title">Sales Performance (Last 30 Days)</h3>
              <div class="chart-placeholder" id="sales-chart">
                <div class="chart-bars">
                  <div class="chart-bar chart-bar-height-60"></div>
                  <div class="chart-bar chart-bar-height-80"></div>
                  <div class="chart-bar chart-bar-height-45"></div>
                  <div class="chart-bar chart-bar-height-90"></div>
                  <div class="chart-bar chart-bar-height-75"></div>
                  <div class="chart-bar chart-bar-height-95"></div>
                  <div class="chart-bar chart-bar-height-70"></div>
                </div>
                <div class="chart-labels">
                  <span>Week 1</span>
                  <span>Week 2</span>
                  <span>Week 3</span>
                  <span>Week 4</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Business Intelligence -->
          <div class="dashboard-section">
            <div class="section-header">
              <div class="section-icon">B</div>
              <div class="section-title-group">
                <h2 class="section-title">Business Intelligence</h2>
                <p class="section-subtitle">Comprehensive dashboards with real-time metrics and insights</p>
              </div>
            </div>
            
            <div class="bi-grid">
              <div class="bi-card">
                <h3 class="bi-title">AI Agent Performance</h3>
                <div class="bi-metrics">
                  <div class="bi-metric">
                    <span class="bi-label">Response Time</span>
                    <span class="bi-value">142ms</span>
                  </div>
                  <div class="bi-metric">
                    <span class="bi-label">Success Rate</span>
                    <span class="bi-value">99.2%</span>
                  </div>
                  <div class="bi-metric">
                    <span class="bi-label">Uptime</span>
                    <span class="bi-value">99.9%</span>
                  </div>
                </div>
              </div>
              
              <div class="bi-card">
                <h3 class="bi-title">Customer Insights</h3>
                <div class="bi-metrics">
                  <div class="bi-metric">
                    <span class="bi-label">Active Users</span>
                    <span class="bi-value">2,847</span>
                  </div>
                  <div class="bi-metric">
                    <span class="bi-label">Satisfaction</span>
                    <span class="bi-value">4.8/5</span>
                  </div>
                  <div class="bi-metric">
                    <span class="bi-label">Retention</span>
                    <span class="bi-value">94.3%</span>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="insights-container">
              <h3 class="insights-title">Key Insights</h3>
              <div class="insights-list">
                <div class="insight-item">
                  <div class="insight-icon">+</div>
                  <div class="insight-content">
                    <p>Sales increased 15% after implementing AI-powered recommendations</p>
                  </div>
                </div>
                <div class="insight-item">
                  <div class="insight-icon">F</div>
                  <div class="insight-content">
                    <p>ChatGPT integration reduced response time by 40%</p>
                  </div>
                </div>
                <div class="insight-item">
                  <div class="insight-icon">A</div>
                  <div class="insight-content">
                    <p>Gemini model shows 98% accuracy for inventory predictions</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- API Management -->
          <div class="dashboard-section">
            <div class="section-header">
              <div class="section-icon">A</div>
              <div class="section-title-group">
                <h2 class="section-title">API Management</h2>
                <p class="section-subtitle">Manage API keys, monitor usage, and configure agent integrations</p>
              </div>
            </div>
            
            <div class="api-management-grid">
              <div class="api-card">
                <h3 class="api-title">API Usage</h3>
                <div class="api-stats">
                  <div class="api-stat">
                    <span class="api-label">Requests Today</span>
                    <span class="api-value">45,672</span>
                  </div>
                  <div class="api-stat">
                    <span class="api-label">Rate Limit</span>
                    <span class="api-value">1,000/min</span>
                  </div>
                  <div class="api-stat">
                    <span class="api-label">Success Rate</span>
                    <span class="api-value">99.7%</span>
                  </div>
                </div>
              </div>
              
              <div class="api-card">
                <h3 class="api-title">Active API Keys</h3>
                <div class="api-key-list">
                  <div class="api-key-item">
                    <div class="api-key-info">
                      <span class="api-key-name">Production Key</span>
                      <span class="api-key-status active">Active</span>
                    </div>
                    <div class="api-key-value">bai_****...****</div>
                  </div>
                  <div class="api-key-item">
                    <div class="api-key-info">
                      <span class="api-key-name">Development Key</span>
                      <span class="api-key-status active">Active</span>
                    </div>
                    <div class="api-key-value">bai_****...****</div>
                  </div>
                  <div class="api-key-item">
                    <div class="api-key-info">
                      <span class="api-key-name">Testing Key</span>
                      <span class="api-key-status inactive">Inactive</span>
                    </div>
                    <div class="api-key-value">bai_****...****</div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="agent-configuration">
              <h3 class="config-title">AI Agent Configuration</h3>
              <div class="agent-list">
                <div class="agent-item">
                  <div class="agent-icon">C</div>
                  <div class="agent-info">
                    <span class="agent-name">ChatGPT Integration</span>
                    <span class="agent-status enabled">Enabled</span>
                  </div>
                  <button class="btn btn-sm btn-secondary" onclick="window.location.href='/pages/ai-config.html?agent=chatgpt'">Configure</button>
                </div>
                <div class="agent-item">
                  <div class="agent-icon">G</div>
                  <div class="agent-info">
                    <span class="agent-name">Gemini Integration</span>
                    <span class="agent-status enabled">Enabled</span>
                  </div>
                  <button class="btn btn-sm btn-secondary" onclick="window.location.href='/pages/ai-config.html?agent=gemini'">Configure</button>
                </div>
                <div class="agent-item">
                  <div class="agent-icon">C</div>
                  <div class="agent-info">
                    <span class="agent-name">Claude Integration</span>
                    <span class="agent-status disabled">Disabled</span>
                  </div>
                  <button class="btn btn-sm btn-primary" onclick="window.location.href='/pages/ai-config.html?agent=claude'">Enable</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Security & Compliance -->
          <div class="dashboard-section">
            <div class="section-header">
              <div class="section-icon">S</div>
              <div class="section-title-group">
                <h2 class="section-title">Security & Compliance</h2>
                <p class="section-subtitle">Access audit logs, manage permissions, and monitor security events</p>
              </div>
            </div>
            
            <div class="security-grid">
              <div class="security-card">
                <h3 class="security-title">Security Overview</h3>
                <div class="security-metrics">
                  <div class="security-metric">
                    <span class="security-label">Threats Blocked</span>
                    <span class="security-value">23</span>
                  </div>
                  <div class="security-metric">
                    <span class="security-label">Failed Logins</span>
                    <span class="security-value">7</span>
                  </div>
                  <div class="security-metric">
                    <span class="security-label">Last Scan</span>
                    <span class="security-value">2 min ago</span>
                  </div>
                </div>
              </div>
              
              <div class="security-card">
                <h3 class="security-title">Compliance Status</h3>
                <div class="compliance-list">
                  <div class="compliance-item">
                    <span class="compliance-name">GDPR</span>
                    <span class="compliance-status compliant">Compliant</span>
                  </div>
                  <div class="compliance-item">
                    <span class="compliance-name">SOC 2</span>
                    <span class="compliance-status compliant">Compliant</span>
                  </div>
                  <div class="compliance-item">
                    <span class="compliance-name">PCI DSS</span>
                    <span class="compliance-status compliant">Compliant</span>
                  </div>
                  <div class="compliance-item">
                    <span class="compliance-name">ISO 27001</span>
                    <span class="compliance-status pending">Pending</span>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="audit-log">
              <h3 class="audit-title">Recent Audit Events</h3>
              <div class="audit-list">
                <div class="audit-item">
                  <div class="audit-time">2 min ago</div>
                  <div class="audit-event">API key regenerated for production environment</div>
                  <div class="audit-user">admin@baintegrate.com</div>
                </div>
                <div class="audit-item">
                  <div class="audit-time">15 min ago</div>
                  <div class="audit-event">Claude integration disabled</div>
                  <div class="audit-user">admin@baintegrate.com</div>
                </div>
                <div class="audit-item">
                  <div class="audit-time">1 hour ago</div>
                  <div class="audit-event">Failed login attempt from 192.168.1.100</div>
                  <div class="audit-user">unknown</div>
                </div>
                <div class="audit-item">
                  <div class="audit-time">2 hours ago</div>
                  <div class="audit-event">User permissions updated for demo@baintegrate.com</div>
                  <div class="audit-user">admin@baintegrate.com</div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer id="main-footer" class="footer">
    <div class="footer-container">
      <div class="footer-grid">
        <div>
          <div class="footer-brand">BA Integrate</div>
          <p class="footer-description">
            Business-Agent Integration Standard (BAIS) platform for hotels, restaurants, and e-commerce.
          </p>
        </div>
        
        <div>
          <h4 class="footer-section-title">Platform</h4>
          <ul class="footer-links">
            <li><a href="/pages/platform.html">Features</a></li>
            <li><a href="/pages/security.html">Security</a></li>
            <li><a href="/pages/contact.html">Contact</a></li>
            <li><a href="/pages/integrations.html">Integrations</a></li>
          </ul>
        </div>
        
        <div>
          <h4 class="footer-section-title">Resources</h4>
          <ul class="footer-links">
            <li><a href="/pages/guides.html">Guides</a></li>
            <li><a href="/pages/api-reference.html">API Reference</a></li>
            <li><a href="/pages/support.html">Support</a></li>
          </ul>
        </div>
        
        <div>
          <h4 class="footer-section-title">Company</h4>
          <ul class="footer-links">
            <li><a href="/pages/about.html">About</a></li>
            <li><a href="/pages/careers.html">Careers</a></li>
            <li><a href="/pages/blog.html">Blog</a></li>
            <li><a href="/pages/contact.html">Contact</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-bottom">
        <div class="footer-copyright">
          &copy; 2025 BA Integrate. All rights reserved.
        </div>
        <div class="footer-legal">
          <a href="/pages/privacy.html">Privacy Policy</a>
          <a href="/pages/terms.html">Terms of Service</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script type="module">
    import Navigation from '/assets/js/components/Navigation.js';
    import CONFIG from '/assets/js/core/config.js';
    
    // Check authentication
    document.addEventListener('DOMContentLoaded', () => {
      const token = localStorage.getItem('bais_auth_token') || sessionStorage.getItem('bais_auth_token');
      const userEmail = localStorage.getItem('bais_user_email') || sessionStorage.getItem('bais_user_email');
      
      if (!token) {
        window.location.href = '/pages/login.html';
        return;
      }
      
      // Initialize navigation
      new Navigation('#main-nav');
      
      // Set user name
      if (userEmail) {
        document.getElementById('user-name').textContent = userEmail;
      }
      
      // Load dashboard data
      loadDashboardData();
      
      // Setup event listeners
      setupEventListeners();
    });
    
    async function loadDashboardData() {
      const token = localStorage.getItem('bais_auth_token') || sessionStorage.getItem('bais_auth_token');
      
      try {
        // Try to fetch real data from backend
        const response = await fetch(`${CONFIG.API_BASE_URL}/api/v1/dashboard`, {
          headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json'
          }
        });
        
        if (response.ok) {
          const data = await response.json();
          updateDashboard(data);
        } else {
          // Fall back to demo data if backend is not available
          loadDemoData();
        }
      } catch (error) {
        console.log('Using demo data:', error);
        loadDemoData();
      }
    }
    
    function loadDemoData() {
      // Demo data for when backend is not available
      const demoData = {
        ecommerce: {
          revenue: '$24,567',
          orders: '1,247',
          conversion: '3.2%',
          avgOrder: '$89.45'
        },
        bi: {
          responseTime: '142ms',
          successRate: '99.2%',
          uptime: '99.9%',
          activeUsers: '2,847',
          satisfaction: '4.8/5',
          retention: '94.3%'
        },
        api: {
          requests: '45,672',
          rateLimit: '1,000/min',
          successRate: '99.7%'
        },
        security: {
          threats: '23',
          failedLogins: '7',
          lastScan: '2 min ago'
        }
      };
      
      updateDashboard(demoData);
    }
    
    function updateDashboard(data) {
      // Update e-commerce metrics
      if (data.ecommerce) {
        document.getElementById('total-revenue').textContent = data.ecommerce.revenue || '$24,567';
        document.getElementById('orders-processed').textContent = data.ecommerce.orders || '1,247';
        document.getElementById('conversion-rate').textContent = data.ecommerce.conversion || '3.2%';
        document.getElementById('avg-order-value').textContent = data.ecommerce.avgOrder || '$89.45';
      }
      
      // Update business intelligence metrics
      if (data.bi) {
        // Update BI metrics in the DOM
        const biMetrics = document.querySelectorAll('.bi-value');
        if (biMetrics.length >= 6) {
          biMetrics[0].textContent = data.bi.responseTime || '142ms';
          biMetrics[1].textContent = data.bi.successRate || '99.2%';
          biMetrics[2].textContent = data.bi.uptime || '99.9%';
          biMetrics[3].textContent = data.bi.activeUsers || '2,847';
          biMetrics[4].textContent = data.bi.satisfaction || '4.8/5';
          biMetrics[5].textContent = data.bi.retention || '94.3%';
        }
      }
      
      // Update API metrics
      if (data.api) {
        const apiStats = document.querySelectorAll('.api-value');
        if (apiStats.length >= 3) {
          apiStats[0].textContent = data.api.requests || '45,672';
          apiStats[1].textContent = data.api.rateLimit || '1,000/min';
          apiStats[2].textContent = data.api.successRate || '99.7%';
        }
      }
      
      // Update security metrics
      if (data.security) {
        const securityMetrics = document.querySelectorAll('.security-value');
        if (securityMetrics.length >= 3) {
          securityMetrics[0].textContent = data.security.threats || '23';
          securityMetrics[1].textContent = data.security.failedLogins || '7';
          securityMetrics[2].textContent = data.security.lastScan || '2 min ago';
        }
      }
    }
    
    function setupEventListeners() {
      // Logout button
      document.getElementById('logout-btn').addEventListener('click', () => {
        localStorage.removeItem('bais_auth_token');
        sessionStorage.removeItem('bais_auth_token');
        localStorage.removeItem('bais_user_email');
        sessionStorage.removeItem('bais_user_email');
        window.location.href = '/pages/login.html';
      });
      
      // Refresh button
      document.getElementById('refresh-btn').addEventListener('click', () => {
        loadDashboardData();
      });
      
      // Export button
      document.getElementById('export-btn').addEventListener('click', () => {
        exportReport();
      });
    }
    
    function exportReport() {
      // In a real implementation, this would generate and download a report
      alert('Export feature will be implemented in the full version. This would generate a PDF report of your dashboard metrics.');
    }
  </script>

</body>
</html>
